<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>platformer: Setup</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">platformer
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Setup </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Project/Scene setup</h1>
<p>Project can be setup using <code>Configuration</code> It's a Singleton MonoBehaviour that you must attach to every scene. Also attach UpdateManager and your scene is ready.</p>
<p>We really recommend to create a prefab with UpdateManager &amp; Configuration.</p>
<h2>Configuration</h2>
<p>Each scene can have different configuration, be vary careful when loading a scene into because cannot use <code>Additive</code>.</p>
<p>Configure:</p>
<ul>
<li>Min distance to env</li>
<li>Gravity</li>
<li>Tags</li>
<li>Layers</li>
</ul>
<h2>UpdateManager</h2>
<p><code>unity-platformer</code> has it's own update <code>loop</code>. <code>UpdateManager</code> it the loop owner, use <code>FixedUpdate</code> but none other class will.</p>
<p>If you want something to be updated by <code>UpdateManager</code> implement: <code>IUpdateEntity</code> Basically has two methods: <code>PlatformerUpdate(float delta)</code> and <code>LatePlatformerUpdate(float delta)</code> Also implements OnEnable to attach the class to the <code>UpdateManager</code> And implements OnDisable to detach</p>
<p>Why?</p><ul>
<li>Secuencial update, we are sure that Unity don't modify anything in the middle of the simulation, something like call OnEnterTrigger2D is dangerous.</li>
<li>Be precise in updating order, for example: move platforms before characters.</li>
<li>Support time scale changes, Coroutines are not reliable. <code>UpdateManager.SetTimeout</code> and <code>UpdateManager.SetInterval</code> are.</li>
<li>Be able to survive Hotswapping</li>
</ul>
<h2>Real Physics vs Fake Manual/Physics</h2>
<p>We develop our custom manual collision, but it's proven to not be 100% reliable.</p>
<p>Problems raise when something is moving in your world and it's not a MovingPlatform, or it's rotating. This kind of collision can penetrate into Characters colliders and destroy the simulation.</p>
<p>To solve this there is two aproachs:</p>
<ul>
<li>Reduce Fixed Timestep to something near <code>0.002</code>. This will increment the simulation time a lot, performance drop, but the simulation will be more stable.</li>
<li>Let Unity physics handle the hard part to avoid penetrations. This also present many chalenges because some parts of our manual collision cannot be ported straight so right now it's not the recommended way.</li>
</ul>
<p>So in the end we will have a mixed physics.</p>
<h2>No graphics</h2>
<p>There is no graphic here, just game-logic.</p>
<p><code>unity-platformer</code> prioritize Configuration &amp; UpdateManager to be executed first, as they are Singletons, many classes rely on them being initialized before.</p>
<p><code>unity-platformer</code> require UnityTestTools or remove the <code>Assets/Test</code> folder.</p>
<p>The rest of libraries are optional. And handled with a macros</p>
<ul>
<li><p class="startli"><code>CharacterAnimatorSpriter.cs</code></p>
<p class="startli">macro: UP_USE_SPRITER</p>
<p class="startli">Require <a href="https://github.com/loodakrawa/SpriterDotNet">SpriterDotNet</a>.Unity</p>
</li>
<li><p class="startli"><code>DefaultInput.cs</code></p>
<p class="startli">macro: UP_USE_CN_INPUT_MANAGER</p>
<p class="startli">Require <a href="https://www.assetstore.unity3d.com/en/#!/content/15233">CnControls</a> from the UnityStore.</p>
<p class="startli">macro: UP_USE_WII_INPUT_MANAGER</p>
<p class="startli">Require <a href="https://github.com/Flafla2/Unity-Wiimote">Unity-Wiimote</a>. This enable the usage of a single wiimote (no nunchuck atm)</p>
</li>
</ul>
<h2>Tagging</h2>
<p>Tags are configured at <code>Configuration</code> component.</p>
<p>Tags can be mixed to create hybrid behaviours: like moving platforms that are one way platforms.</p>
<p>This is achieved having a tag that contains both names. ex: <code>MovingPlatform&amp;OneWayPlatforms</code>, &amp; is not mandatory I use it for readability purposes.</p>
<h2>prefabs</h2>
<p>To include prefabs in the scene use <code>InstancePrefab</code>. It's not mandatory, but it will save space in your .scene and you will be sure that there is no change in the prefab.</p>
<p><code>InstancePrefab</code> can be extended like what we do with <code>PlayerStart</code> to setup the camera.</p>
<p>Also useful for testing like: <code>TestInputPatrolJumping</code>, <code>TestInputPatrolLadder</code> etc. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 12 2017 11:16:50 for platformer by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
